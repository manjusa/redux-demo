<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Redux Demo - Code Examples</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css"
    />
    <style>
      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto",
          sans-serif;
        line-height: 1.6;
        color: #333;
        background: #f8f9fa;
        margin: 0;
        padding: 20px;
        scroll-behavior: smooth;
      }
      .container {
        max-width: 1000px;
        margin: 0 auto;
        background: white;
        border-radius: 10px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        padding: 40px;
      }
      h1 {
        color: #2c3e50;
        border-bottom: 3px solid #3498db;
        padding-bottom: 10px;
        margin-bottom: 30px;
        font-size: 2.5em;
      }
      h2 {
        color: #34495e;
        margin: 40px 0 20px 0;
        font-size: 1.8em;
        border-left: 4px solid #3498db;
        padding-left: 15px;
      }
      .code-block {
        background: #2d3748;
        border-radius: 8px;
        padding: 20px;
        margin: 20px 0;
        overflow-x: auto;
      }
      .code-block code {
        color: #e2e8f0;
        font-family: "Fira Code", "Monaco", "Cascadia Code", monospace;
        font-size: 14px;
        line-height: 1.5;
      }
      .back-link {
        display: inline-block;
        margin-bottom: 20px;
        color: #3498db;
        text-decoration: none;
        font-weight: 500;
      }
      .back-link:hover {
        text-decoration: underline;
      }
      .code-section {
        margin-bottom: 40px;
        border: 1px solid #e1e8ed;
        border-radius: 8px;
        padding: 20px;
        scroll-margin-top: 20px;
        transition: box-shadow 0.3s ease;
      }
      .code-section:target {
        box-shadow: 0 0 20px rgba(52, 152, 219, 0.3);
        border-color: #3498db;
      }
      .code-title {
        color: #2c3e50;
        font-size: 1.3em;
        margin-bottom: 15px;
        font-weight: 600;
      }
      .code-description {
        color: #666;
        margin-bottom: 15px;
        font-style: italic;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <a href="README.html" class="back-link">← Back to README</a>

      <h1>Redux Demo - Code Examples</h1>
      <p>
        This page contains all the code examples referenced in the main README
        documentation.
      </p>

      <div class="code-section" id="store-configuration">
        <div class="code-title">Store Configuration</div>
        <div class="code-description">
          Creating the Redux store with configureStore and setting up reducers
        </div>
        <div class="code-block">
          <pre><code>// Create the store with configureStore (Redux Toolkit)
export const store = configureStore({
    reducer: {
        handles: handlesReducer, // Each reducer manages a slice of state
    },
    preloadedState, // Load saved data from localStorage
});</code></pre>
        </div>
      </div>

      <div class="code-section" id="single-reducer">
        <div class="code-title">Single Reducer Function Example</div>
        <div class="code-description">
          When you pass a single reducer function, that function becomes the
          entire root reducer for your store
        </div>
        <div class="code-block">
          <pre><code>// A simple counter reducer function
function counterReducer(state = { count: 0 }, action) {
  switch (action.type) {
    case 'INCREMENT':
      return { count: state.count + 1 };
    case 'DECREMENT':
      return { count: state.count - 1 };
    default:
      return state;
  }
}

// Using single reducer
const store = configureStore({
  reducer: counterReducer // Single function
});

// Your state shape will be: { count: 0 }</code></pre>
        </div>
      </div>

      <div class="code-section" id="object-reducers">
        <div class="code-title">Object of Reducers (Slice Reducers)</div>
        <div class="code-description">
          An object where keys become state slice names and values are the
          reducer functions. Redux automatically combines them using
          combineReducers
        </div>
        <div class="code-block">
          <pre><code>// Different slice reducers
function usersReducer(state = [], action) {
  // handles user-related actions
  return state;
}

function postsReducer(state = [], action) {
  // handles post-related actions
  return state;
}

function handlesReducer(state = [], action) {
  // handles social media handles
  return state;
}

// Using object of reducers
const store = configureStore({
  reducer: {
    users: usersReducer,    // state.users
    posts: postsReducer,    // state.posts
    handles: handlesReducer // state.handles
  }
});

// Your state shape will be:
// {
//   users: [],
//   posts: [],
//   handles: []
// }</code></pre>
        </div>
      </div>

      <div class="code-section" id="localstorage-key">
        <div class="code-title">LocalStorage Key Constant</div>
        <div class="code-description">
          Define a constant key for localStorage operations
        </div>
        <div class="code-block">
          <pre><code>const LOCALSTORAGE_KEY = "redux_demo_handles";</code></pre>
        </div>
      </div>

      <div class="code-section" id="load-state">
        <div class="code-title">Load State Function</div>
        <div class="code-description">
          Function to load serialized state from localStorage with error
          handling
        </div>
        <div class="code-block">
          <pre><code>function loadState() {
  try {
    const serializedState = localStorage.getItem(LOCALSTORAGE_KEY);
    if (serializedState === null) return undefined;
    return JSON.parse(serializedState);
  } catch (err) {
    return undefined;
  }
}

const preloadedState = loadState();</code></pre>
        </div>
      </div>

      <div class="code-section" id="save-state">
        <div class="code-title">Save State Function</div>
        <div class="code-description">
          Function to save current state to localStorage with comprehensive
          error handling
        </div>
        <div class="code-block">
          <pre><code>/*saveState
summary: Takes the current state as an argument
Converts the state object to a JSON string using JSON.stringify()
Saves it to the browser's localStorage using a predefined key (LOCALSTORAGE_KEY)
Includes error handling in case serialization fails or localStorage is full/disabled

This pattern is commonly used to:
- Persist Redux state across page refreshes
- Implement features like "Save to local storage"
- Cache application state for faster initial loads
*/
function saveState(state) {
  try {
    const serializedState = JSON.stringify(state);
    localStorage.setItem(LOCALSTORAGE_KEY, serializedState);
  } catch (err) {
    console.log(err);
  }
}</code></pre>
        </div>
      </div>

      <div class="code-section" id="store-subscription">
        <div class="code-title">Store Subscription</div>
        <div class="code-description">
          Set up automatic state saving whenever the store state changes
        </div>
        <div class="code-block">
          <pre><code>// THEN subscribe AFTER store is created:
// This code sets up a listener on the Redux store. The subscribe method runs the provided callback
// function every time the store's state changes. It's like setting up an automatic save feature.
store.subscribe(() => {
  saveState(store.getState());
});</code></pre>
        </div>
      </div>

      <div class="code-section" id="slice-creation">
        <div class="code-title">How Slice Links to Store</div>
        <div class="code-description">
          Complete flow of creating a slice and connecting it to the store
        </div>
        <div class="code-block">
          <pre><code>// 1) CREATE SLICE (handlesSlice.js)
const handlesSlice = createSlice({
    name: 'handles', // Slice name
    initialState: [], // Initial state for this slice
    reducers: { // Reducer functions
        addHandle: (state, action) => {
            state.push(action.payload);
        },
        removeHandle: (state, action) => {
            return state.filter(handle => handle.id !== action.payload);
        }
    }
});

// 2. EXPORT REDUCER
export default handlesSlice.reducer; // This goes to store
export const { addHandle, removeHandle } = handlesSlice.actions; // Action creators

// 3. CONNECT TO STORE (store.js the one we created above)
import handlesReducer from './handles/handlesSlice';

const store = configureStore({
    reducer: {
        handles: handlesReducer // Links slice reducer to store
    }
});</code></pre>
        </div>
      </div>

      <div class="code-section" id="initial-state">
        <div class="code-title">Initial State Setup</div>
        <div class="code-description">
          Creating the initial state structure for your slice
        </div>
        <div class="code-block">
          <pre><code>const initialState = {
    items: [  // optional example:
        // { id: '1', platform: 'twitter', username: '@demo', createdAt: '...' }
    ]
};</code></pre>
        </div>
      </div>

      <div class="code-section" id="makeid-function">
        <div class="code-title">MakeID Function</div>
        <div class="code-description">
          Generate unique IDs using timestamp and random string combination
        </div>
        <div class="code-block">
          <pre><code>// makeID() combining the current timestamp (in base-36)
// with a random string (5 characters from base-36), 
// creating something like "l8x9k2abc"
function makeId() {
    return Date.now().toString(36) + Math.random().toString(36).slice(2, 7);
}</code></pre>
        </div>
      </div>

      <div class="code-section" id="slice-template">
        <div class="code-title">Complete Slice Template</div>
        <div class="code-description">
          Basic structure for creating a Redux slice with all common reducers
        </div>
        <div class="code-block">
          <pre><code>export const handlesSlice = createSlice({
    name: "handles", // Name for this slice 
    initialState: {
        items: [] // Starting state
    },
    reducers: {
        // Functions that update state
        addHandle: {
            reducer(state, action) {
                state.items.push(action.payload);
            },
            prepare({ platform, username }) {
                return {
                    payload: {
                        id: makeId(),
                        platform,
                        username,
                        createdAt: new Date().toISOString()
                    }
                };
            }
        },
        updateHandle: (state, action) => {
            const { id, platform, username } = action.payload;
            const existingHandle = state.items.find(item => item.id === id);
            if (existingHandle) {
                existingHandle.platform = platform;
                existingHandle.username = username;
            }
        },
        removeHandle: (state, action) => {
            state.items = state.items.filter(item => item.id !== action.payload);
        },
        loadHandles: (state, action) => {
            state.items = action.payload;
        },
        clearAll: (state) => {
            state.items = [];
        }
    }
});</code></pre>
        </div>
      </div>

      <div class="code-section" id="selector-functions">
        <div class="code-title">Selector Functions</div>
        <div class="code-description">
          Functions to extract specific pieces of state from the Redux store
        </div>
        <div class="code-block">
          <pre><code>// Basic selector - gets all handles
export const selectAllHandles = (state) => state.handles.items;

// Selector with parameter - find handle by ID
export const selectHandleById = (state, id) =>
  state.handles.items.find((h) => h.id === id);

// Selector with parameter - filter handles by platform
export const selectHandlesByPlatform = (state, platform) =>
  state.handles.items.filter((h) => h.platform === platform);

// Additional useful selectors
export const selectHandleCount = (state) => state.handles.items.length;

export const selectPlatforms = (state) => 
  [...new Set(state.handles.items.map(h => h.platform))];

// Usage in components:
// const allHandles = useSelector(selectAllHandles);
// const twitterHandles = useSelector(state => selectHandlesByPlatform(state, 'twitter'));
// const specificHandle = useSelector(state => selectHandleById(state, '123'));</code></pre>
        </div>
      </div>

      <div class="code-section" id="reducer-syntax">
        <div class="code-title">Reducer Syntax Differences</div>
        <div class="code-description">
          Understanding when to use object syntax vs direct function syntax
        </div>
        <div class="code-block">
          <pre><code>// Object with reducer property (when you have BOTH reducer AND prepare)
addHandle: {
    reducer(state, action) {  // ← function inside an object
        state.items.push(action.payload);
    },
    prepare({ platform, username }) {
        return {
            payload: {
                id: makeId(),
                platform,
                username,
                createdAt: new Date().toISOString()
            }
        };
    }
}

// Direct function (when you have ONLY a reducer)
updateHandle(state, action) {  // ← direct function
    const { id, platform, username } = action.payload;
    const existingHandle = state.items.find(item => item.id === id);
    if (existingHandle) {
        existingHandle.platform = platform;
        existingHandle.username = username;
    }
}

// Redux Toolkit automatically converts direct functions to:
updateHandle: {
    reducer(state, action) {
        // your logic here
    }
}</code></pre>
        </div>
      </div>

      <div class="code-section" id="addhandlerform-component">
        <div class="code-title">AddHandlerForm Component</div>
        <div class="code-description">
          Complete React component for adding new social media handles with form
          validation
        </div>
        <div class="code-block">
          <pre><code>import React, { useState } from 'react';
import { useDispatch } from 'react-redux';
import { addHandle } from './handlesSlice';

// Array of supported platforms
const PLATFORMS = ['twitter', 'instagram', 'facebook', 'linkedin', 'youtube'];

export default function AddHandleForm() {
  const dispatch = useDispatch();
  const [platform, setPlatform] = useState(PLATFORMS[0]);
  const [username, setUsername] = useState("");
  const [error, setError] = useState(null);

  function onSubmit(e) {
    e.preventDefault();
    const trimmed = username.trim();
    if (!trimmed) {
      setError("Please enter a username");
      return;
    }
    dispatch(addHandle({ platform, username: trimmed }));
    setUsername("");
    setError(null);
  }

  return (
    &lt;form onSubmit={onSubmit}&gt;
      &lt;div&gt;
        &lt;label&gt;Platform: 
          &lt;select value={platform} onChange={e =&gt; setPlatform(e.target.value)}&gt;
            {PLATFORMS.map((p) =&gt; (
              &lt;option key={p} value={p}&gt;
                {p}
              &lt;/option&gt;
            ))}
          &lt;/select&gt;
        &lt;/label&gt;
      &lt;/div&gt;
      
      &lt;div&gt;
        &lt;label&gt;Username: 
          &lt;input 
            type="text" 
            value={username} 
            onChange={e =&gt; setUsername(e.target.value)}
            placeholder="Enter username (e.g., @john)" 
          /&gt;
        &lt;/label&gt;
      &lt;/div&gt;
      
      &lt;button type="submit"&gt;Add&lt;/button&gt;
      
      {error && &lt;div style={{color: 'red'}}&gt;{error}&lt;/div&gt;}
    &lt;/form&gt;
  );
}</code></pre>
        </div>
      </div>

      <div class="code-section" id="platforms-constant">
        <div class="code-title">Platforms Constant</div>
        <div class="code-description">
          Array of supported social media platforms for the dropdown
        </div>
        <div class="code-block">
          <pre><code>const PLATFORMS = [
  'twitter', 
  'instagram', 
  'facebook', 
  'linkedin', 
  'youtube',
  'tiktok',
  'snapchat'
];

// Alternative with display names:
const PLATFORMS_WITH_LABELS = [
  { value: 'twitter', label: 'Twitter' },
  { value: 'instagram', label: 'Instagram' },
  { value: 'facebook', label: 'Facebook' },
  { value: 'linkedin', label: 'LinkedIn' },
  { value: 'youtube', label: 'YouTube' }
];</code></pre>
        </div>
      </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
  </body>
</html>
